(function(b){var a=function(d,c){var e={defaultOptions:{changed:function(g,f,i,h){},same:function(g,f,h){},eventList:["click","mouseMove","keyUp","scroll","resize"]},options:{},element:null,check:function(g){var f=this;f.element.data("previousVisibility",f.element.data("currentVisibility"));f.element.data("currentVisibility",f.element.is(":visible"));if(f.element.data("previousVisibility")==f.element.data("currentVisibility")){f.options.same(f.element,f.element.data("currentVisibility"),g)}else{f.options.changed(f.element,f.element.data("currentVisibility"),f.element.data("previousVisibility"),g)}return f},init:function(h,f){var g=this;g.options=b.extend({},g.defaultOptions,f);g.element=b(h);if(g.element.data("currentVisibility")){}else{g.element.data("currentVisibility",g.element.is(":visible"));g.element.data("previousVisibility",null)}if(g.options.eventList){b.each(g.options.eventList,function(j,k){b(document).on(k,function(i){g.check(i)})})}return g}};e.init(d,c);return e};b.fn.extend({visibilityChanged:function(c){var c=c||{};return new a(this,c)}});b(document).ready(function(){b("*.watchVisibility").each(function(c,d){d=b(d);d.data("currentVisibility",d.is(":visible"));d.data("previousVisibility",null);if(d.data("visibilityChangedOptions")){d.visibilityChanged(b(d).data("visibilityChangedOptions"))}})})})(jQuery);
